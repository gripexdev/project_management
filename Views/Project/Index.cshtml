@model ProjectDashboard.Models.ProjectIndexViewModel

@{
    ViewData["Title"] = "Project Page";
}

<div class="card">
    <h5 class="card-header">Projects</h5>
    <div class="table-responsive text-nowrap">
        @if (Model.Projects == null || !Model.Projects.Any())  
        {
            <p style="text-align: center;">No projects at the moment.</p> 
        }
        else
        {
            <table class="table">
                <thead class="table-light">
                    <tr>
                        <th>Project</th>
                        <th>Description</th>
                        <th>Start Date</th>
                        <th>End Date</th>
                        <th>Status</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody class="table-border-bottom-0">
                    @foreach (var project in Model.Projects)
                    {
                        <tr>
                            <td>@project.Name</td>
                            <td>@project.Description</td>
                            <td>@project.StartDate.ToString("yyyy-MM-dd")</td>
                            <td>@project.EndDate.ToString("yyyy-MM-dd")</td>
                            <td>
                                @if (project.Status.ToString() == "InProgress")
                                {
                                    <span class="badge bg-label-primary me-1">In Progress</span>
                                }
                                else if (project.Status.ToString() == "Completed")
                                {
                                    <span class="badge bg-label-success me-1">Completed</span>
                                }
                                else if (project.Status.ToString() == "Pending")
                                {
                                    <span class="badge bg-label-info me-1">Pending</span>
                                }
                                else
                                {
                                    <span class="badge bg-label-secondary me-1">Unknown</span>
                                }
                            </td>
                            <td>
                                <div class="dropdown">
                                    <button type="button" class="btn p-0 dropdown-toggle hide-arrow"
                                        data-bs-toggle="dropdown"><i class="bx bx-dots-vertical-rounded"></i></button>
                                    <div class="dropdown-menu">
                                        <a class="dropdown-item" href="javascript:void(0);"><i class="bx bx-edit-alt me-1"></i>
                                            Edit</a>
                                        <a class="dropdown-item" href="javascript:void(0);"><i class="bx bx-trash me-1"></i>
                                            Delete</a>
                                    </div>
                                </div>
                            </td>
                        </tr>
                    }
                </tbody>
            </table>

            <div class="d-flex justify-content-center">
                <ul class="pagination">
                    @if (Model.CurrentPage > 1)
                    {
                        <li class="page-item">
                            <a class="page-link" href="@Url.Action("Index", new { page = Model.CurrentPage - 1, pageSize = Model.PageSize })">Previous</a>
                        </li>
                    }
                    @for (int i = 1; i <= Model.TotalPages; i++)
                    {
                        <li class="page-item @(i == Model.CurrentPage ? "active" : "")">
                            <a class="page-link" href="@Url.Action("Index", new { page = i, pageSize = Model.PageSize })">@i</a>
                        </li>
                    }
                    @if (Model.CurrentPage < Model.TotalPages)
                    {
                        <li class="page-item">
                            <a class="page-link" href="@Url.Action("Index", new { page = Model.CurrentPage + 1, pageSize = Model.PageSize })">Next</a>
                        </li>
                    }
                </ul>
            </div>
        }
    </div>
</div>
